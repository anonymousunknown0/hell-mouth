<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Virtual Spiral Notebook</title>
  <style>
    body {
      margin: 0;
      background: #111 url('spiral.gif') center center fixed;
      background-size: cover;
      font-family: monospace;
      color: white;
      overflow-x: hidden;
      min-height: 100vh;
    }
    .puzzle-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 16px;
      padding: 30px 10px 80px 10px;
      z-index: 2;
    }
    .tile {
      background: rgba(0,0,0,0.15);
      border-radius: 20px;
      border: 2px solid #fff;
      box-shadow: 0 0 16px #000a;
      width: 190px;
      height: 106px;
      overflow: hidden;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      position: relative;
      transition: transform 0.18s, box-shadow 0.18s;
    }
    .tile img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      pointer-events: none;
      display: block;
      opacity: 0.9;
    }
    .tile-number {
      position: absolute;
      top: 7px;
      left: 12px;
      font-size: 1.4rem;
      font-weight: bold;
      color: #FFD600;
      text-shadow: 1px 1px 8px #000, 0 0 6px #222;
      letter-spacing: 1px;
      z-index: 2;
    }
    .tile-filename {
      position: absolute;
      bottom: 7px;
      left: 0;
      width: 100%;
      text-align: center;
      font-size: 0.88em;
      color: #FFD600;
      font-weight: bold;
      letter-spacing: 0.04em;
      padding: 0 4px;
      background: rgba(0,0,0,0.18);
      z-index: 2;
      text-shadow: 1px 1px 6px #000;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      pointer-events: none;
    }
    .tile:hover, .tile:focus {
      transform: scale(1.08);
      box-shadow: 0 0 26px #fff8;
      border-color: #ffd700;
      z-index: 10;
    }
    #content {
      display: none;
      min-height: 100vh;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      background: rgba(0,0,0,0.97);
      position: fixed;
      inset: 0;
      z-index: 20;
    }
    #content video, #content audio {
      width: 90vw;
      max-width: 700px;
      margin: 24px auto 8px auto;
      display: block;
      background: #000;
      border-radius: 16px;
      box-shadow: 0 0 12px #0008;
    }
    #content .filename {
      color: #ffd700;
      font-size: 1.14rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      margin-top: 12px;
      margin-bottom: 5px;
      text-align: center;
      word-break: break-all;
    }
    #content .close-btn, .copy-btn {
      font-size: 1.07rem;
      color: #fff;
      background: rgba(0,0,0,0.5);
      border: 1px solid #fff;
      border-radius: 14px;
      padding: 7px 20px;
      cursor: pointer;
      margin: 20px auto 0 auto;
      transition: background 0.16s;
      z-index: 999;
      display: block;
      outline: none;
    }
    #content .close-btn:hover {
      background: #e00;
      color: #fff;
    }
    .copy-btn {
      background: #FFD600;
      color: #111;
      font-weight: bold;
      border-color: #FFD600;
      margin-bottom: 0;
      margin-top: 14px;
    }
    .copy-btn:active {
      background: #ffc107;
    }
    @media (max-width: 800px) {
      .tile {
        width: 92vw;
        height: 20vw;
        min-height: 80px;
      }
      #content video, #content audio {
        width: 97vw;
        max-width: 97vw;
      }
    }
  </style>
</head>
<body>

<audio id="click-sound" src="click.mp3" preload="auto"></audio>

<div class="puzzle-grid" id="puzzle-grid"></div>

<div id="content">
  <div class="filename" id="file-name"></div>
  <div id="content-area"></div>
  <button class="close-btn" onclick="closeContent()">CLOSE</button>
</div>

<script>
const files = [
  // Example files, edit this to add/remove puzzle pieces
  "The Surveillance Tape.mp4",
  "choose your player.mp4",
  "hellmouth part one_1.mp4",
  "333_leaked_therapy_smaller.mp4",
  "lunch with the narrator.mp3",
  "go_gay_outro.script.txt", // <--- Your script file
  "3 cock anatomy.mp4",
  "5 hypnotize.mp4",
  "6 macbook air.mp4",
  "7 male body.mp4",
  "9 microchip.mp4",
  "11 old school smoking.mp4",
  "12 sperm microscope.mp4",
  "17 heart.mp4",
  "18 diagnosis final.mp4",
  "23 window trees.mp4",
  "24 diagnosis 1.mp4",
  "25 muscle god.mp4",
  "26 eyes.mp4",
  "30 diagnosis 3.mp4",
  "30 shadow man.mp4",
  "31 the human brain.mp4",
  "36 warner bros.mp4",
  "38 facial expressions.mp4",
  "41 my body.mp4",
  "42 diagnosis 2.mp4",
  "42 the emotional wheel.mp4",
  "44 ups pimp my truck.mp4",
  "45 weed.mp4",
  "47 to write love....mp4",
  "50 gay police 2.mp4",
  "53 primetime boomboxx.mp4",
  "54 77 johnson park.mp4",
  "55 blu hair do care.mp4",
  "61 the statue of david.mp4",
  "67 fwmukigit.mp4",
  "72 horny lesbians.mp4",
  "74 kylie jenner.mp4",
  "hot body.mov.mp4",
  "kim kardashian.mp4",
  "lizzo.mp4",
  "part 1.mov.mp4",
  "part 3.mov.mp4",
  "part 4.mov.mp4",
  "part 5.mov.mp4",
  "part 6.mov.mp4",
  "part 9.mp4",
  "part 10.mov.mp4",
  "stress.mov.mp4",
  "the crying room.mov.mp4",
  "the dopeiest of dopeness.mp4"
];

// Helper to escape HTML for scripts
function escapeHTML(str) {
  return str.replace(/[&<>"']/g, function (m) {
    return ({
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#39;'
    })[m];
  });
}

// Only play click ONCE on first click
let hasClicked = false;
function playClickOnce() {
  if (!hasClicked) {
    hasClicked = true;
    const audio = document.getElementById('click-sound');
    audio.currentTime = 0;
    audio.play();
  }
}

function openFile(file, idx) {
  playClickOnce();
  document.getElementById('puzzle-grid').style.display = "none";
  const content = document.getElementById('content');
  const area = document.getElementById('content-area');
  const namebox = document.getElementById('file-name');
  let ext = file.split('.').pop().toLowerCase();

  area.innerHTML = "";
  namebox.innerHTML = file;

  if (
    ext === 'mp3' ||
    ext === 'wav' ||
    ext === 'm4a'
  ) {
    area.innerHTML = `<audio controls autoplay loop><source src="${file}"></audio>`;
  } else if (
    ext === 'txt' || file.endsWith('.script.txt')
  ) {
    fetch(file)
      .then(response => response.text())
      .then(data => {
        area.innerHTML = `
        <pre style="white-space: pre-wrap; word-break: break-word; color: #fff; font-size: 1.11em; font-family: 'Courier New', Courier, monospace; background: #222; border-radius: 14px; padding: 16px 8px; box-shadow:0 0 6px #000b; max-width: 94vw; margin: 0 auto 18px auto;">${escapeHTML(data)}</pre>
        <button class="copy-btn" onclick="copyScript()">COPY TO CLIPBOARD</button>
        `;
        window.currentScript = data; // for clipboard
      });
  } else {
    area.innerHTML = `<video controls autoplay loop><source src="${file}"></video>`;
  }
  content.style.display = "flex";
  content.scrollIntoView({behavior: "smooth"});
}

function closeContent() {
  document.getElementById('content').style.display = "none";
  document.getElementById('puzzle-grid').style.display = "flex";
  // Stop all media playback:
  document.querySelectorAll('#content-area video, #content-area audio').forEach(el=>{
    el.pause && el.pause();
    el.currentTime = 0;
  });
}
function copyScript() {
  if (window.currentScript) {
    navigator.clipboard.writeText(window.currentScript);
    alert('Script copied to clipboard!');
  }
}

function displayTiles() {
  let grid = document.getElementById('puzzle-grid');
  grid.innerHTML = "";
  for (let i = 0; i < files.length; ++i) {
    let file = files[i];
    grid.innerHTML += `
      <div class="tile" onclick="openFile('${file.replace(/'/g,"\\'")}',${i})">
        <div class="tile-number">${i+1}</div>
        <img src="spiral.gif" alt="spiral" />
        <div class="tile-filename">${file}</div>
      </div>`;
  }
}
displayTiles();
</script>
</body>
</html>